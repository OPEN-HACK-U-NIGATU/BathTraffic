{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>お風呂の混雑状況</title>

    <!--レスポンシブデザインの導入-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- cssファイルの読み込み -->
    <link rel="stylesheet" type="text/css" href="{% static 'css/styles.css' %}">

    <!-- Chart.jsのスクリプトを読み込む -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- PWAの実装 -->
	<link rel="manifest" href="{% static 'manifest.json' %}">
	<script>
		if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js').then(function() { console.log('Service Worker Registered'); });
			}
	</script>
		<!-- ここまで -->
</head>
<!--　人数表示に関するコード　-->
<body background="{% static 'img/hinoki.jpg' %}">
    <h1>現在のお風呂の混雑状況</h1>

    <!-- グラフを表示するためのCanvas要素 -->
    <canvas id="myChart"></canvas>

    <div id="detailPeople">
        <!-- 小風呂の人数を表示する枠 -->
        <div class="bath-container">
            <span>
                <h2>小風呂</h2>
                <!-- 人数表示に色のクラスを追加 -->
                <p id="small-bath-count" class="count {{ small.color }}">{{ small.count }}</p>
            </span>
            <span class="ninn">
                <h3>人</h3>
                <p class="unit"></p>
            </span>
        </div>

        <!-- 大風呂の人数を表示する枠 -->
        <div class="bath-container">
            <span>
                <h2>大風呂</h2>
                <!-- 人数表示に色のクラスを追加 -->
                <p id="large-bath-count" class="count {{ large.color }}">{{ large.count }}</p>
            </span>
            <span class="ninn">
                <h3>人</h3>
                <p class="unit"></p>
            </span>
        </div>
    </div>

    <!--予測をグラフ化するコード-->
    <script>
        // バックエンドから取得したデータをJavaScriptの変数に代入
        var timeLabels = ["16:00", "17:00", "18:00", "19:00", "20:00", "21:00", "22:00", "23:00"];
        var peopleData = ["5", "3", "4", "6", "7", "2", "4", "8"];   /*仮の値*/

        // Canvas要素を取得
        var ctx = document.getElementById('myChart').getContext('2d');

        // データセットの設定
        var data = {
            labels: timeLabels,
            datasets: [{
                label: '人数',
                data: peopleData,
                backgroundColor: 'rgba(75, 192, 192, 0.2)', // 棒の背景色 (水色)
                borderColor: 'rgba(0, 0, 0, 1)', // 棒の境界線の色 (黒色)
                borderWidth: 1 // 棒の境界線の幅
            }]
        };

        // グラフのオプション設定
        var options = {
            scales: {
                y: {
                    beginAtZero: true // y軸を0から始める
                }
            },
            plugins: {
                legend: {
                    display: false // 凡例を非表示
                }
            }
        };

        // グラフを描画
        var myChart = new Chart(ctx, {
            type: 'bar',
            data: data,
            options: options
        });
    </script>
</body>
</html>